(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23f9bd80"],{7543:function(e,t,a){"use strict";a("96cf");var r=a("3b8d"),n=a("795b"),i=a.n(n),s=a("d225"),c=a("b0b4"),u=a("bc3a"),o=a.n(u),l="/api/sale",p=function(){function e(){Object(s["a"])(this,e)}return Object(c["a"])(e,null,[{key:"createSale",value:function(e){return new i.a(function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(a,r){var n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.post("".concat(l,"/create"),{sale:e});case 3:n=t.sent,i=n.data,a(i),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),r(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e,a){return t.apply(this,arguments)}}())}},{key:"getSales",value:function(e){return new i.a(function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(a,r){var n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.get("".concat(l,"/").concat(e));case 3:n=t.sent,i=n.data,a(i),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),r(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e,a){return t.apply(this,arguments)}}())}}]),e}();t["a"]=p},"761e":function(e,t,a){"use strict";var r=a("cebc"),n=(a("96cf"),a("3b8d")),i=a("795b"),s=a.n(i),c=a("d225"),u=a("b0b4"),o=a("bc3a"),l=a.n(o),p="/api/model",d=function(){function e(){Object(c["a"])(this,e)}return Object(u["a"])(e,null,[{key:"getModels",value:function(){return new s.a(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,a){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.get(p);case 3:n=e.sent,i=n.data,t(i.data.rows.map(function(e){return Object(r["a"])({},e)})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),a(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,a){return e.apply(this,arguments)}}())}},{key:"createModel",value:function(e){return new s.a(function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(a,r){var n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.post("".concat(p,"/create"),{model:e});case 3:n=t.sent,i=n.data,a(i),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),r(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e,a){return t.apply(this,arguments)}}())}},{key:"deleteModel",value:function(e){return new s.a(function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(a,r){var n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.delete("".concat(p,"/delete/").concat(e));case 3:n=t.sent,i=n.data,a(i),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),r(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e,a){return t.apply(this,arguments)}}())}}]),e}();t["a"]=d},e7c1:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-12"},[e.error?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"alert alert-danger"},[e._v("\n        An error has occurred: "+e._s(e.error)+".\n        "),a("br"),a("a",{staticClass:"alert-link",attrs:{href:"",onclick:"window.location.reload()"}},[e._v("Click here to refresh")])])])]):e._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"card m-bl-30"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"col"},[a("div",{staticClass:"row",staticStyle:{"margin-bottom":"15px"}},[a("div",{staticClass:"col"},[a("router-link",{attrs:{to:{name:"Diapers"}}},[a("button",{staticClass:"btn btn-warning waves-effect waves-light float-right"},[a("i",{staticClass:"fa fa-arrow-left"}),e._v("\n                    Back\n                  ")])]),a("h4",{staticClass:"mt-0 header-title"},[e._v("Buy diaper")]),a("p",{staticClass:"text-muted m-b-30 font-14"})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.submitForm()}}},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-4 col-xl-2 col-form-label",attrs:{for:"model"}},[e._v("Size")]),a("div",{staticClass:"col-sm-8 col-xl-10"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.sale.size,expression:"sale.size"}],staticClass:"custom-select",attrs:{id:"model",required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.sale,"size",t.target.multiple?a:a[0])},function(t){return e.updateMax(t)}]}},[e.diaper.availableL>0?a("option",{attrs:{value:"L"}},[e._v("Large - Available "+e._s(e.diaper.availableL))]):e._e(),e.diaper.availableM>0?a("option",{attrs:{value:"M"}},[e._v("Medium - Available "+e._s(e.diaper.availableM))]):e._e(),e.diaper.availableP>0?a("option",{attrs:{value:"P"}},[e._v("Small - Available "+e._s(e.diaper.availableP))]):e._e()])])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-sm-4 col-xl-2 col-form-label",attrs:{for:"description"}},[e._v("Quantity of diapers")]),a("div",{staticClass:"col-sm-8 col-xl-10"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.sale.quantity,expression:"sale.quantity"}],staticClass:"form-control",attrs:{type:"number",required:"",min:"1",max:"1",id:"quantityDiapers"},domProps:{value:e.sale.quantity},on:{input:function(t){t.target.composing||e.$set(e.sale,"quantity",t.target.value)}}})])]),e._m(0)])])])])])])])])])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-group row"},[a("div",{staticClass:"col-sm-12"},[a("button",{staticClass:"btn btn-primary waves-effect waves-light",attrs:{type:"submit",id:"buyButton"}},[e._v("Buy")])])])}],i=a("e814"),s=a.n(i),c=(a("96cf"),a("3b8d")),u=(a("761e"),a("ac12")),o=a("7543"),l={data:function(){return{id:"",diaper:{availableL:0,availableM:0,availableP:0},sale:{diaperId:{type:String,defalt:""},size:"",quantity:1,createdAt:new Date},error:""}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),created:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$route.params.id;case 2:return this.id=e.sent,this.sale.diaperId=this.id,e.next=6,u["a"].getDiaper(this.id).then(function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(a){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.diaper=a.data,r=a.code,200==r){e.next=8;break}return t.error=a.error,e.next=6,document.getElementById("saveButton");case 6:n=e.sent,n&&(n.disabled=!0);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.error=a;case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),computed:{},methods:{updateMax:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.target.value,r=document.getElementById("quantityDiapers"),!r){e.next=13;break}e.t0=a,e.next="L"===e.t0?6:"M"===e.t0?8:"P"===e.t0?10:12;break;case 6:return r.max=this.diaper.availableL,e.abrupt("break",13);case 8:return r.max=this.diaper.availableM,e.abrupt("break",13);case 10:return r.max=this.diaper.availableP,e.abrupt("break",13);case 12:return e.abrupt("break",13);case 13:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),submitForm:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,a,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return event.preventDefault(),e.next=3,document.getElementById("buyButton");case 3:return t=e.sent,t&&(t.textContent="Wait while proccess",t.disabled=!0),a=0,e.next=8,this.sale.size;case 8:e.t0=e.sent,e.next="L"===e.t0?11:"M"===e.t0?13:"P"===e.t0?15:17;break;case 11:return a=this.diaper.availableL,e.abrupt("break",18);case 13:return a=this.diaper.availableM,e.abrupt("break",18);case 15:return a=this.diaper.availableP,e.abrupt("break",18);case 17:return e.abrupt("break",18);case 18:if(!(s()(this.sale.quantity)>s()(a))){e.next=23;break}return e.next=21,this.$swal("Error","You cannot buy ".concat(this.sale.quantity," diapers. Available diapers to this size is ").concat(a),"error");case 21:return t&&(t.disabled=!1,t.textContent="Buy"),e.abrupt("return");case 23:return e.next=25,o["a"].createSale(this.sale).then(function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.$swal("Bought","You bought ".concat(r.sale.quantity," diapers of size ").concat(r.sale.size," with success"),"success");case 2:return e.next=4,r.$router.push({name:"Diapers"});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=r.error,e.next=3,a;case 3:r.error=e.t0+=e.sent,t&&(t.disabled=!1,t.textContent="Buy");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 25:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},p=l,d=a("2877"),v=Object(d["a"])(p,r,n,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-23f9bd80.771d2e03.js.map