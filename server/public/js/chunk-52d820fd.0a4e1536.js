(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52d820fd"],{7543:function(t,e,a){"use strict";a("96cf");var r=a("3b8d"),n=a("795b"),s=a.n(n),i=a("d225"),c=a("b0b4"),u=a("bc3a"),o=a.n(u),l="/api/sale",d=function(){function t(){Object(i["a"])(this,t)}return Object(c["a"])(t,null,[{key:"createSale",value:function(t){return new s.a(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(a,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("".concat(l,"/create"),{sale:t});case 3:n=e.sent,s=n.data,a(s),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),r(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,a){return e.apply(this,arguments)}}())}},{key:"getSales",value:function(t){return new s.a(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(a,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get("".concat(l,"/").concat(t));case 3:n=e.sent,s=n.data,a(s),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),r(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,a){return e.apply(this,arguments)}}())}}]),t}();e["a"]=d},"761e":function(t,e,a){"use strict";var r=a("cebc"),n=(a("96cf"),a("3b8d")),s=a("795b"),i=a.n(s),c=a("d225"),u=a("b0b4"),o=a("bc3a"),l=a.n(o),d="/api/model",v=function(){function t(){Object(c["a"])(this,t)}return Object(u["a"])(t,null,[{key:"getModels",value:function(){return new i.a(function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(e,a){var n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.get(d);case 3:n=t.sent,s=n.data,e(s.data.rows.map(function(t){return Object(r["a"])({},t)})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),a(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e,a){return t.apply(this,arguments)}}())}},{key:"createModel",value:function(t){return new i.a(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(a,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.post("".concat(d,"/create"),{model:t});case 3:n=e.sent,s=n.data,a(s),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),r(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,a){return e.apply(this,arguments)}}())}},{key:"deleteModel",value:function(t){return new i.a(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(a,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.delete("".concat(d,"/delete/").concat(t));case 3:n=e.sent,s=n.data,a(s),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),r(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,a){return e.apply(this,arguments)}}())}}]),t}();e["a"]=v},fd76:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12"},[t.error?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"alert alert-danger"},[t._v("\n        An error has occurred: "+t._s(t.error)+".\n        "),a("br"),a("a",{staticClass:"alert-link",attrs:{href:"",onclick:"window.location.reload()"}},[t._v("Click here to refresh")])])])]):t._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"card m-bl-30"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"col"},[a("div",{staticClass:"row",staticStyle:{"margin-bottom":"15px"}},[a("div",{staticClass:"col"},[a("router-link",{attrs:{to:{name:"Diapers"}}},[a("button",{staticClass:"btn btn-warning waves-effect waves-light float-right"},[a("i",{staticClass:"fa fa-arrow-left"}),t._v("\n                    Back\n                  ")])]),a("h4",{staticClass:"mt-0 header-title"},[t._v("Diaper details")]),a("p",{staticClass:"text-muted m-b-30 font-14"})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-3 col-sm-6 mb-3"},[a("div",{staticClass:"card text-white bg-warning o-hidden h-100"},[a("div",{staticClass:"card-body"},[t._m(0),a("div",{staticClass:"mr-5"},[t._v(t._s(parseInt(t.diaper.boughtL)+parseInt(t.diaper.boughtM)+parseInt(t.diaper.boughtP))+" Total Sales")])])])]),a("div",{staticClass:"col-xl-3 col-sm-6 mb-3"},[a("div",{staticClass:"card text-white bg-warning o-hidden h-100"},[a("div",{staticClass:"card-body"},[t._m(1),a("div",{staticClass:"mr-5"},[t._v(t._s(t.diaper.boughtL)+" Total Sales - L")])])])]),a("div",{staticClass:"col-xl-3 col-sm-6 mb-3"},[a("div",{staticClass:"card text-white bg-warning o-hidden h-100"},[a("div",{staticClass:"card-body"},[t._m(2),a("div",{staticClass:"mr-5"},[t._v(t._s(t.diaper.boughtM)+" Total Sales - M")])])])]),a("div",{staticClass:"col-xl-3 col-sm-6 mb-3"},[a("div",{staticClass:"card text-white bg-warning o-hidden h-100"},[a("div",{staticClass:"card-body"},[t._m(3),a("div",{staticClass:"mr-5"},[t._v(t._s(t.diaper.boughtP)+" Total Sales - S")])])])])]),a("h5",[t._v("Possible date for zero stock")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"table-rep-plugin"},[a("div",{staticClass:"table-responsive b-0",attrs:{"data-pattern":"priority-columns"}},[a("table",{staticClass:"table table-striped",attrs:{id:"tech-companies-1"}},[t._m(4),a("tbody",[a("tr",[a("td",[t._v("Large")]),a("td",[t._v(t._s(t.endStockL))])]),a("tr",[a("td",[t._v("Medium")]),a("td",[t._v(t._s(t.endStockM))])]),a("tr",[a("td",[t._v("Small")]),a("td",[t._v(t._s(t.endStockP))])])])])])])])]),a("hr"),a("h5",[t._v("Stock")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"table-rep-plugin"},[a("div",{staticClass:"table-responsive b-0",attrs:{"data-pattern":"priority-columns"}},[a("table",{staticClass:"table table-striped",attrs:{id:"tech-companies-1"}},[t._m(5),a("tbody",[a("tr",[a("td",[t._v("Large")]),a("td",[t._v(t._s(t.diaper.availableL))])]),a("tr",[a("td",[t._v("Medium")]),a("td",[t._v(t._s(t.diaper.availableM))])]),a("tr",[a("td",[t._v("Small")]),a("td",[t._v(t._s(t.diaper.availableP))])])])])])])])]),a("hr"),a("h5",[t._v("Sales history")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"table-rep-plugin"},[a("div",{staticClass:"table-responsive b-0",attrs:{"data-pattern":"priority-columns"}},[a("table",{staticClass:"table table-striped",attrs:{id:"tech-companies-1"}},[t._m(6),a("tbody",t._l(t.sales,function(e,r){return a("tr",{key:e._id,attrs:{item:e,index:r}},["L"==e.sale.size?a("td",[t._v("Large")]):t._e(),"M"==e.sale.size?a("td",[t._v("Medium")]):t._e(),"P"==e.sale.size?a("td",[t._v("Small")]):t._e(),a("td",[t._v(t._s(e.sale.quantity))]),a("td",[t._v(t._s(t.formatDate(new Date(e.sale.createdAt))))])])}),0)])])])])])])])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-body-icon"},[a("i",{staticClass:"fas fa-fw fa-list"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-body-icon"},[a("i",{staticClass:"fas fa-fw fa-list"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-body-icon"},[a("i",{staticClass:"fas fa-fw fa-list"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-body-icon"},[a("i",{staticClass:"fas fa-fw fa-list"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Size")]),a("th",{attrs:{"data-priority":"2"}},[t._v("Date")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Size")]),a("th",{attrs:{"data-priority":"2"}},[t._v("Quantity")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Size")]),a("th",{attrs:{"data-priority":"1"}},[t._v("Quantity")]),a("th",{attrs:{"data-priority":"2"}},[t._v("Date")])])])}],s=a("e814"),i=a.n(s),c=(a("96cf"),a("3b8d")),u=(a("761e"),a("ac12")),o=a("7543"),l={data:function(){return{diaper:{model:"",description:"",availableL:0,availableM:0,availableP:0,boughtL:0,boughtM:0,boughtP:0},sales:{},error:"",id:"",endStockL:"Calculating...",endStockM:"Calculating...",endStockP:"Calculating..."}},mounted:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));function e(){return t.apply(this,arguments)}return e}(),created:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.id=this.$route.params.id,t.next=3,o["a"].getSales(this.id).then(function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.sales=a.data;case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.error+=a;case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 3:return t.next=5,u["a"].getDiaper(this.id).then(function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.data;case 2:return e.diaper=t.sent,t.next=5,e.calculateEndOfStock();case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.error+=a;case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),computed:{},methods:{calculateEndOfStock:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.calculate("L");case 2:return e=t.sent,t.next=5,this.calculate("M");case 5:return a=t.sent,t.next=8,this.calculate("P");case 8:r=t.sent,this.endStockL=e,this.endStockM=a,this.endStockP=r;case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),calculate:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e){var a,r,n,s,c,u,o,l,d,v,p;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getTotalStock(e);case 2:return a=t.sent,r=a,t.next=6,this.getSales(e);case 6:return n=t.sent,s=0,c=null,u=null,o=0,t.next=13,n.forEach(function(t){o++;var e=new Date(t.createdAt);0==s&&(c=e),u=e,r-=i()(t.quantity),s+=i()(t.quantity)});case 13:if(!(o>1)){t.next=21;break}return t.next=16,this.getDiff(u,c);case 16:return l=t.sent,d=l/s,v=d*r,p=new Date(c.getTime()+1e3*v),t.abrupt("return",this.formatDate(p));case 21:return t.abrupt("return","No sufficient data to calculate");case 22:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),getSales:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=[],t.next=3,this.sales.forEach(function(t){t.sale.size==e&&a.push(t.sale)});case 3:return t.abrupt("return",a);case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),getTotalStock:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:t.t0=e,t.next="L"===t.t0?3:"M"===t.t0?4:"P"===t.t0?5:6;break;case 3:return t.abrupt("return",i()(this.diaper.availableL)+i()(this.diaper.boughtL));case 4:return t.abrupt("return",i()(this.diaper.availableM)+i()(this.diaper.boughtM));case 5:return t.abrupt("return",i()(this.diaper.availableM)+i()(this.diaper.boughtM));case 6:return t.abrupt("break",7);case 7:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),formatDate:function(t){return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},getDiff:function(t,e){var a=t.getTime()-e.getTime(),r=a/1e3;return Math.abs(r)}}},d=l,v=a("2877"),p=Object(v["a"])(d,r,n,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-52d820fd.0a4e1536.js.map